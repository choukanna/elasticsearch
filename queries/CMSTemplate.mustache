{
    "size": {{size}},
    "from": {{from}},
    {{#sortBy}}
      	{{#datelineSort}}
        		"sort": {
          		"dates.{{sortBy}}": "{{sortOrder}}"
        		},
      	{{/datelineSort}}
      	{{#createdDateSort}}
        		"sort": {
          		"dates.{{sortBy}}": "{{sortOrder}}"
        		},
      	{{/createdDateSort}}
      	{{#lastPubDateSort}}
        		"sort": {
          		"dates.{{sortBy}}": "{{sortOrder}}"
        		},
      	{{/lastPubDateSort}}
      	{{#updatedDateSort}}
        		"sort": {
          		"dates.{{sortBy}}": "{{sortOrder}}"
        		},
      	{{/updatedDateSort}}
      	{{#unpublishDateSort}}
        		"sort": {
          		"dates.{{sortBy}}": "{{sortOrder}}"
        		},
      	{{/unpublishDateSort}}
      	{{#lastUsedSort}}
        		"sort": {
          		"lastUsed": "{{sortOrder}}"
        		},
      	{{/lastUsedSort}}
      	{{#relevanceSort}}
        		"sort": {
          		"_score": "{{sortOrder}}"
        		},
      	{{/relevanceSort}}
      	{{#authorSort}}
        		"sort": {
          		"content.tagName": {
            			"mode" : "min",
            			"nested_filter": {
                			"nested": {
                    			"path" : "content.association",
                    			"query": {
                        			"bool": {
                            			"filter": {
                                			"term": {
                                    			"content.association.type": "author"
                                			}
                            			}
                        			}
                    			}
                			}
            			},
            			"nested_path"  : "content",
            			"order": "{{sortOrder}}"
          		}
        		},
        {{/authorSort}}
      	{{#videoDurationSort}}
        		"sort": {
          		"videoDuration": "{{sortOrder}}"
        		},
      	{{/videoDurationSort}}
      	{{#stateSort}}
        		"sort": {
          		"state": "{{sortOrder}}"
       		 },
      	{{/stateSort}}
    	{{/sortBy}}
    "query": {
        "bool": {
            {{#searchPhrase}}
            		"must": {
            			{{^sortBy}}
                			"function_score": {
                    			"query": {
                    	{{/sortBy}}
                     "dis_max": {
                          "queries": [
                               {
                                    "match": {
                                        "id": {
                                            "_name"   : "id",
                                            "boost"   : 3.5,
                                            "operator": "and",
                                            "query"   : "{{searchPhrase}}"
                                        }
                                    }
                               }, 
                               {
                                    "match": {
                                        "link": {
                                            "_name"   : "link",
                                            "boost"   : 3.25,
                                            "operator": "and",
                                            "query"   : "{{searchPhrase}}"
                                        }
                                    }
                               }, 
                               {
                                    "match": {
                                        "symbol.forFilter": {
                                            "_name"   : "symbol.forFilter",
                                            "boost"   : 3,
                                            "operator": "and",
                                            "query"   : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "title.autoComplete": {
                                            "_name"         : "title.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "title.analyzedText": {
                                            "_name"         : "title.analyzedText",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness"     : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost"         : 2.75,
                                            "operator"      : "and",
                                            "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                        "title.compound": {
                                            "_name"         : "title.compound",
                                            {{#autoCorrect}}
                                              "fuzziness"     : 1,
                                              "max_expansions": 10,
                                              "prefix_length" : 3,
                                            {{/autoCorrect}}
                                              "boost"         : 2.75,
                                              "operator"      : "and",
                                              "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "keywords.autoComplete": {
                                            "_name"         : "keywords.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "keywords": {
                                            "_name"         : "keywords",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness"     : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost"         : 2.25,
                                            "operator"      : "and",
                                            "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                        "keywords.compound": {
                                            "_name"         : "keywords.compound",
                                            {{#autoCorrect}}
                                              "fuzziness"     : 1,
                                              "max_expansions": 10,
                                              "prefix_length" : 3,
                                            {{/autoCorrect}}
                                              "boost"         : 2.25,
                                              "operator"      : "and",
                                              "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "slug.autoComplete": {
                                            "_name"         : "slug.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "slug.analyzedText": {
                                            "_name"         : "slug.analyzedText",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness"     : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost"         : 2,
                                            "operator"      : "and",
                                            "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                        "slug.compound": {
                                            "_name"         : "slug.compound",
                                            {{#autoCorrect}}
                                              "fuzziness"     : 1,
                                              "max_expansions": 10,
                                              "prefix_length" : 3,
                                            {{/autoCorrect}}
                                              "boost"         : 2,
                                              "operator"      : "and",
                                              "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "keypointsText.autoComplete": {
                                            "_name"         : "keypointsText.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "keypointsText": {
                                            "_name"         : "keypointsText",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness"     : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost"         : 1.75,
                                            "operator"      : "and",
                                            "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                        "keypointsText.compound": {
                                            "_name"         : "keypointsText.compound",
                                            {{#autoCorrect}}
                                              "fuzziness"     : 1,
                                              "max_expansions": 10,
                                              "prefix_length" : 3,
                                            {{/autoCorrect}}
                                              "boost"         : 1.75,
                                              "operator"      : "and",
                                              "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "summary.autoComplete": {
                                            "_name"         : "summary.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "summary": {
                                            "_name"         : "summary",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness"     : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost"         : 1.5,
                                            "operator"      : "and",
                                            "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                        "summary.compound": {
                                            "_name"         : "summary.compound",
                                            {{#autoCorrect}}
                                              "fuzziness"     : 1,
                                              "max_expansions": 10,
                                              "prefix_length" : 3,
                                            {{/autoCorrect}}
                                              "boost"         : 1.5,
                                              "operator"      : "and",
                                              "query"         : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "match": {
                                      {{#autoComplete}}
                                        "bodyText.autoComplete": {
                                            "_name": "bodyText.autoComplete",
                                      {{/autoComplete}}
                                      {{^autoComplete}}
                                        "bodyText": {
                                            "_name": "bodyText",
                                      {{/autoComplete}}
                                          {{#autoCorrect}}
                                            "fuzziness" : 1,
                                            "max_expansions": 10,
                                            "prefix_length" : 3,
                                          {{/autoCorrect}}
                                            "boost" : 1,
                                            "operator" : "and",
                                            "query" : "{{searchPhrase}}"
                                        }
                                    }
                                }, 
                                {
                                    "nested": {
                                        "inner_hits": {
                                            "_source"  : false,
                                            "highlight": {
                                                "fields": {
                                                    "content.tagName.analyzedText": {},
                                                    "content.tagName.autoComplete": {},
                                                    "content.tagName.compound"    : {}
                                                }
                                            }
                                        },
                                        "path" : "content",
                                        "query" : {
                                            "bool": {
                                                "must": [
                                                    {
                                                        "nested": {
                                                            "path" : "content.association",
                                                            "query": {
                                                                "bool": {
                                                                    "filter": {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.association.type": "section"
                                                                                    }
                                                                                }, 
                                                                                {
                                                                                    "term": {
                                                                                        "content.association.type": "tags"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }, 
                                                    {
                                                        "bool": {
                                                            "should": [
                                                                {
                                                                    "match": {
                                                                        "content.tagName.compound": {
                                                                            "_name" : "content.tagName.compound",
                                                                          {{#autoCorrect}}
                                                                            "fuzziness" : 1,
                                                                            "max_expansions": 10,
                                                                            "prefix_length" : 3,
                                                                          {{/autoCorrect}}
                                                                            "boost" : 2.5,
                                                                            "operator" : "and",
                                                                            "query" : "{{searchPhrase}}"
                                                                        }
                                                                    }
                                                                }, 
                                                                {
                                                                    "match": {
                                                                      {{#autoComplete}}
                                                                        "content.tagName.autoComplete": {
                                                                            "_name" : "content.tagName.autoComplete",
                                                                      {{/autoComplete}}
                                                                      {{^autoComplete}}
                                                                        "content.tagName.analyzedText": {
                                                                            "_name" : "content.tagName.analyzedText",
                                                                      {{/autoComplete}}
                                                                          {{#autoCorrect}}
                                                                            "fuzziness" : 1,
                                                                            "max_expansions": 10,
                                                                            "prefix_length" : 3,
                                                                          {{/autoCorrect}}
                                                                            "boost" : 2.5,
                                                                            "operator" : "and",
                                                                            "query" : "{{searchPhrase}}"
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            ],
                            "tie_breaker": 0.2
                        }
                    {{^sortBy}}
                    },
                    "gauss": {
                        "dates.dateline": {
                            "decay" : 0.7,
                            "offset": "1d",
                            "scale" : "60d"
                        }
                    }
                }
                {{/sortBy}}
            },
            {{/searchPhrase}}
            "filter": {
                "bool": {
                    "must"    : [
                        {{#dateType}}
                        {{#byTimePeriod}}{{#timePeriod}}{
                            "range": {
                                "dates.{{dateType}}": {
                                    "gt": "now-{{timePeriod}}{{timeUnit}}{{^timeUnit}}d{{/timeUnit}}",
                                    "lt": "now"
                                }
                            }
                        },
                        {{/timePeriod}}{{/byTimePeriod}}
                        {{^byTimePeriod}}{{#byDateRange}}{
                            "range": {
                                "dates.{{dateType}}": {
                                    {{#fromDate}}"gte" : "{{fromDate}}",
                                    {{/fromDate}}{{#toDate}}"lte": "{{toDate}}",
                                    {{/toDate}}"format" : "MM-dd-yyyy"
                                }
                            }
                        },
                        {{/byDateRange}}{{/byTimePeriod}}
                        {{/dateType}}
                        {{#stateAndList}}{
                            "match": {
                                "state.forFilter": "{{stateAnd}}"
                            }
                        },
                        {{/stateAndList}}
                        {{#editedByAndList}}{
                            "match": {
                                "editedBy.forFilter": "{{editedByAnd}}"
                            }
                        },
                        {{/editedByAndList}}
                        {{#createdByAndList}}{
                            "match": {
                                "createdBy.forFilter": "{{createdByAnd}}"
                            }
                        },
                        {{/createdByAndList}}
                        {{#contemplateAndList}}{
                            "match": {
                                "isContemplate.forFilter": "{{contemplateAnd}}"
                            }
                        },
                        {{/contemplateAndList}}
                        {{#licensedAndList}}{
                            "match": {
                                "licensed.forFilter": "{{licensedAnd}}"
                            }
                        },
                        {{/licensedAndList}}
                        {{#contentTypeAndList}}{
                            "match": {
                                "type.forFilter": "{{contentTypeAnd}}"
                            }
                        },
                        {{/contentTypeAndList}}
                        {{#subTypeAndList}}{
                            "match": {
                                "subType.forFilter": "{{subTypeAnd}}"
                            }
                        },
                        {{/subTypeAndList}}
                        {{#brandAndList}}{
                            "match": {
                                "branding.forFilter": "{{brandAnd}}"
                            }
                        },
                        {{/brandAndList}}
                        {{#usageRightsAndList}}{
                            "match": {
                                "usageRights.forFilter": "{{usageRightsAnd}}"
                            }
                        },
                        {{/usageRightsAndList}}
                        {{#photoTypeAndList}}{
                            "match": {
                                "photoType.forFilter": "{{photoTypeAnd}}"
                            }
                        },
                        {{/photoTypeAndList}}
                        {{#idAndList}}{
                            "match": {
                                "id": "{{idAnd}}"
                            }
                        },
                        {{/idAndList}}
                        {{#keywordsAndList}}{
                            "match": {
                                "keywords": "{{keywordsAnd}}"
                            }
                        },
                        {{/keywordsAndList}}
                        {{#assocAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{assocAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{assocAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "section"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "tags"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "related"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "additional_sections"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/assocAndList}}
                        {{#sectionSubTypeAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "match": {
                                                "content.subType.forFilter": "{{sectionSubTypeAnd}}"
                                            }
                                        },
                                        "should": [
                                            {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "section"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "additional_sections"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionSubTypeAndList}}
                        {{#authorAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "term": {
                                                        "content.association.type": "author"
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{authorAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{authorAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/authorAndList}}
                        {{#sourceAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "source"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{sourceAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{sourceAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sourceAndList}}
                        {{#usageRuleAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "usageRule"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{usageRuleAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{usageRuleAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/usageRuleAndList}}
                        {{#sectionAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "section"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{sectionAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{sectionAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionAndList}}
                        {{#secondarySectionAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "additional_sections"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{secondarySectionAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{secondarySectionAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/secondarySectionAndList}}
                        {{#tagAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "tags"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{tagAnd}}"
                                                }
                                            }, {
                                                "term": {
                                                    "content.id": "{{tagAnd}}"
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/tagAndList}}
                        {{#personAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{personAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{personAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "person"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "person"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/personAndList}}
                        {{#companyAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{companyAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{companyAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "company"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "company"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/companyAndList}}
                        {{#securityAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{securityAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{securityAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "security"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "security"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/securityAndList}}
                        {{#topicAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{topicAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{topicAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "topic"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "topic"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/topicAndList}}
                        {{#placeAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{placeAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{placeAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "place"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "place"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/placeAndList}}
                        {{#organizationAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{organizationAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{organizationAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "organization"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "organization"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/organizationAndList}}
                        {{#eventAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{eventAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{eventAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "event"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "event"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/eventAndList}}
                        {{#showAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{showAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{showAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "franchise"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/showAndList}}
                        {{#internalAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{internalAnd}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{internalAnd}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "internal"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "internal"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/internalAndList}}
                        {{#symbolAndList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{symbolAnd}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ],
                                        "should": [
                                            {
                                                "term": {
                                                    "content.type": "company"
                                                }
                                            }, {
                                                "term": {
                                                    "content.type": "security"
                                                }
                                            }, {
                                                "bool": {
                                                    "filter": {
                                                        "term": {
                                                            "content.type": "tag"
                                                        }
                                                    },
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.subType": "company"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.subType": "security"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/symbolAndList}}
                        {{#subTypeOr}}
                        {
                            "bool": {
                              "should": [
                                {{#subTypeOrList}}
                                  {
                                    "match": {"subType.forFilter": "{{subType}}"}
                                  },
                                {{/subTypeOrList}}
                                  {}
                              ]
                            }
                        },
                        {{/subTypeOr}}
                        {{#assocOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#assocOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{assoc}}"}
                                                                },
                                                              {{/assocOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        },
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#assocOrList}}
                                                                {
                                                                  "term": {"content.id": "{{assoc}}"}
                                                                },
                                                              {{/assocOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            },
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "section"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "tags"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "related"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "additional_sections"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/assocOr}}
                        {{#sectionSubTypeOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#sectionSubTypeOrList}}
                                                    {
                                                      "match": {"content.subType.forFilter": "{{sectionSubType}}"}
                                                    },
                                                  {{/sectionSubTypeOrList}}
                                                    {}
                                                ]
                                              }
                                            },
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "section"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "additional_sections"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionSubTypeOr}}
                        {{#brandOr}}
                        {
                          "bool": {
                            "should": [
                              {{#brandOrList}}
                                {
                                  "match": {"branding.forFilter": "{{brand}}"}
                                },
                              {{/brandOrList}}
                                {}
                            ]
                          }
                        },
                        {{/brandOr}}
                        {{#photoTypeOr}}
                        {
                          "bool": {
                            "should": [
                              {{#photoTypeOrList}}
                                {
                                  "match": {"photoType.forFilter": "{{photoType}}"}
                                },
                              {{/photoTypeOrList}}
                                {}
                            ]
                          }
                        },
                        {{/photoTypeOr}}
                        {{#usageRightsOr}}
                        {
                          "bool": {
                            "should": [
                              {{#usageRightsOrList}}
                                {
                                  "match": {"usageRights.forFilter": "{{usageRights}}"}
                                },
                              {{/usageRightsOrList}}
                                {}
                            ]
                          }
                        },
                        {{/usageRightsOr}}
                        {{#idOr}}
                        {
                          "terms": {
                                "id": {{#toJson}}idOrList {{/toJson}}
                            }
                        },
                        {{/idOr}}
                        {{#authorOr}}
                        {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "author"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#authorOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{author}}"}
                                                    },
                                                  {{/authorOrList}}
                                                    {}
                                                ]
                                              }
                                            },
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#authorOrList}}
                                                    {
                                                      "term": {"content.id": "{{author}}"}
                                                    },
                                                  {{/authorOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/authorOr}}
                        {{#contentTypeOr}}
                        {
                          "bool": {
                            "should": [
                              {{#contentTypeOrList}}
                                {
                                  "match": {"type.forFilter": "{{contentType}}"}
                                },
                              {{/contentTypeOrList}}
                                {}
                            ]
                          }
                        },
                        {{/contentTypeOr}}
                        {{#stateOr}}
                        {
                          "bool": {
                            "should": [
                              {{#stateOrList}}
                                {
                                  "match": {"state.forFilter": "{{state}}"}
                                },
                              {{/stateOrList}}
                                {}
                            ]
                          }
                        },
                        {{/stateOr}}
                        {{#createdByOr}}
                        {
                          "bool": {
                            "should": [
                              {{#createdByOrList}}
                                {
                                  "match": {"createdBy.forFilter": "{{createdBy}}"}
                                },
                              {{/createdByOrList}}
                                {}
                            ]
                          }
                        },
                        {{/createdByOr}}
                        {{#editedByOr}}
                        {
                          "bool": {
                            "should": [
                              {{#editedByOrList}}
                                {
                                  "match": {"editedBy.forFilter": "{{editedBy}}"}
                                },
                              {{/editedByOrList}}
                                {}
                            ]
                          }
                        },
                        {{/editedByOr}}
                        {{#contemplateOr}}
                        {
                          "bool": {
                            "should": [
                              {{#contemplateOrList}}
                                {
                                  "match": {"isContemplate.forFilter": "{{isContemplate}}"}
                                },
                              {{/contemplateOrList}}
                                {}
                            ]
                          }
                        },
                        {{/contemplateOr}}
                        {{#licensedOr}}
                        {
                          "bool": {
                            "should": [
                              {{#licensedOrList}}
                                {
                                  "match": {"licensed.forFilter": "{{licensed}}"}
                                },
                              {{/licensedOrList}}
                                {}
                            ]
                          }
                        },
                        {{/licensedOr}}
                        {{#keywordsOr}}
                        {
                          "bool": {
                            "should": [
                              {{#keywordsOrList}}
                                {
                                  "match": {"keywords": "{{keywords}}"}
                                },
                              {{/keywordsOrList}}
                                {}
                            ]
                          }
                        },
                        {{/keywordsOr}}
                        {{#sourceOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "source"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#sourceOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{source}}"}
                                                    },
                                                  {{/sourceOrList}}
                                                    {}
                                                ]
                                              }
                                            },
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#sourceOrList}}
                                                    {
                                                      "term": {"content.id": "{{source}}"}
                                                    },
                                                  {{/sourceOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sourceOr}}
                        {{#usageRuleOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "usageRule"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#usageRuleOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{usageRule}}"}
                                                    },
                                                  {{/usageRuleOrList}}
                                                    {}
                                                ]
                                              }
                                            }, {
                                              "bool": {
                                                "should": [
                                                  {{#usageRuleOrList}}
                                                    {
                                                      "term": {"content.id": "{{usageRule}}"}
                                                    },
                                                  {{/usageRuleOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/usageRuleOr}}
                        {{#sectionOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "section"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#sectionOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{section}}"}
                                                    },
                                                  {{/sectionOrList}}
                                                    {}
                                                ]
                                              }
                                            }, {
                                              "bool": {
                                                "should": [
                                                  {{#sectionOrList}}
                                                    {
                                                      "term": {"content.id": "{{section}}"}
                                                    },
                                                  {{/sectionOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionOr}}
                        {{#secondarySectionOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "additional_sections"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#secondarySectionOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{secondarySection}}"}
                                                    },
                                                  {{/secondarySectionOrList}}
                                                    {}
                                                ]
                                              }
                                            }, {
                                              "bool": {
                                                "should": [
                                                  {{#secondarySectionOrList}}
                                                    {
                                                      "term": {"content.id": "{{secondarySection}}"}
                                                    },
                                                  {{/secondarySectionOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/secondarySectionOr}}
                        {{#symbolOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "terms": {
                                                    "content.id": {{#toJson}}symbolOrList {{/toJson}}
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ],
                                        "should": [
                                            {
                                                "term": {
                                                    "content.type": "company"
                                                }
                                            }, {
                                                "term": {
                                                    "content.type": "security"
                                                }
                                            }, {
                                                "bool": {
                                                    "filter": {
                                                        "term": {
                                                            "content.type": "tag"
                                                        }
                                                    },
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.subType": "company"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.subType": "security"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/symbolOr}}
                        {{#personOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#personOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{person}}"}
                                                                },
                                                              {{/personOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#personOrList}}
                                                                {
                                                                  "term": {"content.id": "{{person}}"}
                                                                },
                                                              {{/personOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "person"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "person"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/personOr}}
                        {{#companyOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#companyOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{company}}"}
                                                                },
                                                              {{/companyOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#companyOrList}}
                                                                {
                                                                  "term": {"content.id": "{{company}}"}
                                                                },
                                                              {{/companyOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "company"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "company"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/companyOr}}
                        {{#securityOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#securityOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{security}}"}
                                                                },
                                                              {{/securityOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#securityOrList}}
                                                                {
                                                                  "term": {"content.id": "{{security}}"}
                                                                },
                                                              {{/securityOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "security"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "security"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/securityOr}}
                        {{#topicOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#topicOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{topic}}"}
                                                                },
                                                              {{/topicOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#topicOrList}}
                                                                {
                                                                  "term": {"content.id": "{{topic}}"}
                                                                },
                                                              {{/topicOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "topic"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "topic"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/topicOr}}
                        {{#placeOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#placeOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{place}}"}
                                                                },
                                                              {{/placeOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        },
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#placeOrList}}
                                                                {
                                                                  "term": {"content.id": "{{place}}"}
                                                                },
                                                              {{/placeOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "place"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "place"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/placeOr}}
                        {{#organizationOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#organizationOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{organization}}"}
                                                                },
                                                              {{/organizationOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#organizationOrList}}
                                                                {
                                                                  "term": {"content.id": "{{organization}}"}
                                                                },
                                                              {{/organizationOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "organization"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "organization"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/organizationOr}}
                        {{#eventOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#eventOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{event}}"}
                                                                },
                                                              {{/eventOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#eventOrList}}
                                                                {
                                                                  "term": {"content.id": "{{event}}"}
                                                                },
                                                              {{/eventOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "event"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "event"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/eventOr}}
                        {{#showOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#showOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{show}}"}
                                                                },
                                                              {{/showOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#showOrList}}
                                                                {
                                                                  "term": {"content.id": "{{show}}"}
                                                                },
                                                              {{/showOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "franchise"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/showOr}}
                        {{#internalOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                          "bool": {
                                                            "should": [
                                                              {{#internalOrList}}
                                                                {
                                                                  "match": {"content.tagName.forFilter": "{{internal}}"}
                                                                },
                                                              {{/internalOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }, {
                                                          "bool": {
                                                            "should": [
                                                              {{#internalOrList}}
                                                                {
                                                                  "term": {"content.id": "{{internal}}"}
                                                                },
                                                              {{/internalOrList}}
                                                                {}
                                                            ]
                                                          }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "internal"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "internal"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/internalOr}}
                        {{#tagOr}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "nested": {
                                                "path" : "content.association",
                                                "query": {
                                                    "bool": {
                                                        "filter": {
                                                            "term": {
                                                                "content.association.type": "tags"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "should": [
                                            {
                                              "bool": {
                                                "should": [
                                                  {{#tagOrList}}
                                                    {
                                                      "match": {"content.tagName.forFilter": "{{tag}}"}
                                                    },
                                                  {{/tagOrList}}
                                                    {}
                                                ]
                                              }
                                            }, {
                                              "bool": {
                                                "should": [
                                                  {{#tagOrList}}
                                                    {
                                                      "term": {"content.id": "{{tag}}"}
                                                    },
                                                  {{/tagOrList}}
                                                    {}
                                                ]
                                              }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/tagOr}}{}
                    ],
                    "must_not": [
                        {{#contentTypeNotList}}{
                            "match": {
                                "type.forFilter": "{{contentTypeNot}}"
                            }
                        },
                        {{/contentTypeNotList}}
                        {{#stateNotList}}{
                            "match": {
                                "state.forFilter": "{{stateNot}}"
                            }
                        },
                        {{/stateNotList}}
                        {{#editedByNotList}}{
                            "match": {
                                "editedBy.forFilter": "{{editedByNot}}"
                            }
                        },
                        {{/editedByNotList}}
                        {{#createdByNotList}}{
                            "match": {
                                "createdBy.forFilter": "{{createdByNot}}"
                            }
                        },
                        {{/createdByNotList}}
                        {{#contemplateNotList}}{
                            "match": {
                                "isContemplate.forFilter": "{{contemplateNot}}"
                            }
                        },
                        {{/contemplateNotList}}
                        {{#licensedNotList}}{
                            "match": {
                                "licensed.forFilter": "{{licensedNot}}"
                            }
                        },
                        {{/licensedNotList}}
                        {{#brandNotList}}{
                            "match": {
                                "branding.forFilter": "{{brandNot}}"
                            }
                        },
                        {{/brandNotList}}
                        {{#idNotList}}{
                            "term": {
                                "id": "{{idNot}}"
                            }
                        },
                        {{/idNotList}}
                        {{#usageRightsNotList}}{
                            "match": {
                                "usageRights.forFilter": "{{usageRightsNot}}"
                            }
                        },
                        {{/usageRightsNotList}}
                        {{#photoTypeNotList}}{
                            "match": {
                                "photoType.forFilter": "{{photoTypeNot}}"
                            }
                        },
                        {{/photoTypeNotList}}
                        {{#subTypeNotList}}{
                            "match": {
                                "subType.forFilter": "{{subTypeNot}}"
                            }
                        },
                        {{/subTypeNotList}}
                        {{#keywordsNotList}}{
                            "match": {
                                "keywords": "{{keywordsNot}}"
                            }
                        },
                        {{/keywordsNotList}}
                        {{#assocNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{assocNot}}"
                                                }
                                            },
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "section"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "tags"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "related"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "additional_sections"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{assocNot}}"
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "section"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "tags"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "related"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }, {
                                                            "nested": {
                                                                "path" : "content.association",
                                                                "query": {
                                                                    "bool": {
                                                                        "filter": {
                                                                            "term": {
                                                                                "content.association.type": "additional_sections"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/assocNotList}}
                        {{#sectionSubTypeNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": {
                                            "match": {
                                                "content.subType.forFilter": "{{sectionSubTypeNot}}"
                                            }
                                        },
                                        "should": [
                                            {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "section"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "additional_sections"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionSubTypeNotList}}
                        {{#authorNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{authorNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "author"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{authorNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "author"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/authorNotList}}
                        {{#sourceNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{sourceNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "source"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{sourceNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "source"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sourceNotList}}
                        {{#usageRuleNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{usageRuleNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "usageRule"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{usageRuleNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "usageRule"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/usageRuleNotList}}
                        {{#sectionNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{sectionNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "section"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{sectionNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "section"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/sectionNotList}}
                        {{#secondarySectionNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{secondarySectionNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "additional_sections"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{secondarySectionNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "additional_sections"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/secondarySectionNotList}}
                        {{#symbolNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{symbolNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ],
                                        "should": [
                                            {
                                                "term": {
                                                    "content.type": "company"
                                                }
                                            }, {
                                                "term": {
                                                    "content.type": "security"
                                                }
                                            }, {
                                                "bool": {
                                                    "filter": {
                                                        "term": {
                                                            "content.type": "tag"
                                                        }
                                                    },
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.subType": "company"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.subType": "security"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/symbolNotList}}
                        {{#personNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{personNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{personNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "person"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "person"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/personNotList}}
                        {{#internalNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{internalNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{internalNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "internal"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "internal"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/internalNotList}}
                        {{#companyNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{companyNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{companyNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "company"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "company"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/companyNotList}}
                        {{#securityNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{securityNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{securityNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "security"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "security"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/securityNotList}}
                        {{#topicNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{topicNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{topicNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "topic"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "topic"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/topicNotList}}
                        {{#placeNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{placeNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{placeNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "place"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "place"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/placeNotList}}
                        {{#organizationNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{organizationNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{organizationNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "organization"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "organization"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/organizationNotList}}
                        {{#showNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{showNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{showNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "franchise"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "bool": {
                                                                            "should": [
                                                                                {
                                                                                    "term": {
                                                                                        "content.subType": "news_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "primetime_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "original_show"
                                                                                    }
                                                                                }, {
                                                                                    "term": {
                                                                                        "content.subType": "weekly_show"
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/showNotList}}
                        {{#eventNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "match": {
                                                                "content.tagName.forFilter": "{{eventNot}}"
                                                            }
                                                        }, {
                                                            "term": {
                                                                "content.id": "{{eventNot}}"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }, {
                                                "bool": {
                                                    "should": [
                                                        {
                                                            "term": {
                                                                "content.type": "event"
                                                            }
                                                        }, {
                                                            "bool": {
                                                                "filter": [
                                                                    {
                                                                        "term": {
                                                                            "content.type": "tag"
                                                                        }
                                                                    }, {
                                                                        "term": {
                                                                            "content.subType": "event"
                                                                        }
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/eventNotList}}
                        {{#tagNotList}}{
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "match": {
                                                    "content.tagName.forFilter": "{{tagNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }, {
                            "nested": {
                                "path" : "content",
                                "query": {
                                    "bool": {
                                        "filter": [
                                            {
                                                "term": {
                                                    "content.id": "{{tagNot}}"
                                                }
                                            }, {
                                                "nested": {
                                                    "path" : "content.association",
                                                    "query": {
                                                        "bool": {
                                                            "filter": {
                                                                "term": {
                                                                    "content.association.type": "tags"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        {{/tagNotList}}{}
                    ]
                }
            }
        }
    },
    "highlight"                                     : {
        "fields": {
            "bodyText"              : {},
            "bodyText.autoComplete" : {},
            "id"                    : {},
            "keypointsText"         : {},
            "keypointsText.autoComplete": {},
            "keypointsText.compound": {},
            "keywords"              : {},
            "keywords.autoComplete" : {},
            "keywords.compound"     : {},
            "link"                  : {},
            "slug.autoComplete"     : {},
            "slug.analyzedText"     : {},
            "slug.compound"         : {},
            "summary"               : {},
            "summary.autoComplete"  : {},
            "summary.compound"      : {},
            "symbol.forFilter"      : {},
            "title.autoComplete"    : {},
            "title.analyzedText"    : {},
            "title.compound"        : {}
        }
    },
    "aggs"                                          : {
        "associations"  : {
            "aggs"  : {
                "authorAssocs" : {
                    "aggs"  : {
                        "nested": {
                            "aggs"          : {
                                "authors": {
                                    "terms": {
                                        "field": "content.tagName"
                                    }
                                }
                            },
                            "reverse_nested": {
                                "path": "content"
                            }
                        }
                    },
                    "filter": {
                        "term": {
                            "content.association.type": "author"
                        }
                    }
                },
                "sectionAssocs": {
                    "aggs"  : {
                        "nested": {
                            "aggs"          : {
                                "sections": {
                                    "terms": {
                                        "field": "content.tagName"
                                    }
                                }
                            },
                            "reverse_nested": {
                                "path": "content"
                            }
                        }
                    },
                    "filter": {
                        "term": {
                            "content.association.type": "section"
                        }
                    }
                }
            },
            "nested": {
                "path": "content.association"
            }
        },
        "contentType"   : {
            "terms": {
                "field": "type"
            }
        },
        "range"         : {
            "date_range": {
                "field" : "dates.dateline",
                "format": "MM-dd-YYYY",
                "ranges": [
                    {
                        "from": "now-y/d",
                        "key" : "past one year"
                    }, {
                        "from": "now-7d/d",
                        "key" : "past 7 days"
                    }, {
                        "from": "now/d",
                        "key" : "today"
                    }
                ]
            }
        },
        "specialReports": {
            "filter": {
                "nested": {
                    "path" : "content",
                    "query": {
                        "bool": {
                            "filter": {
                                "term": {
                                    "content.subType": "special_report"
                                }
                            },
                            "should": [
                                {
                                    "nested": {
                                        "path" : "content.association",
                                        "query": {
                                            "bool": {
                                                "filter": {
                                                    "term": {
                                                        "content.association.type": "section"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }, {
                                    "nested": {
                                        "path" : "content.association",
                                        "query": {
                                            "bool": {
                                                "filter": {
                                                    "term": {
                                                        "content.association.type": "additional_sections"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            }
        }
    }
}